# 桜蔭中学校2015年度 国語問題分析の改善結果

## 問題の概要
桜蔭中15年度の国語問題（大問2つ、計11問）が正しく分析されない問題を解決しました。

## 主な問題点と解決策

### 1. 大問検出の問題
- **問題**: 「一、次の文章を読んで」と「二 次の文章を読んで」のパターンが異なる
- **解決**: 両方のパターンに対応する検出ロジックを実装

### 2. 設問検出の問題
- **問題**: 
  - OCRで「問」が「間」として認識される場合がある
  - 設問が複数ページにまたがっている
  - 問一が「-Aについて」として現れ、「問一」の文字がない
  - ページ4の解答用紙部分の設問番号が誤検出される
- **解決**:
  - 「問」と「間」の両方のパターンを検索
  - ページをまたぐ設問の検出ロジックを改善
  - 解答用紙部分の除外処理を追加

### 3. 正確な11問の構成
**大問一（8問）**:
1. 問一: Aについて説明（記述）
2. 問二: Bのように感じた理由（記述）
3. 問三: Eについて説明（記述）
4. 問四: （記述）
5. 問五: ①慣用句（身体の一部）
6. 問六: Fについて説明（記述）
7. ①: 慣用句の穴埋め
8. ②: 慣用句（語群から選択）

**大問二（3問）**:
9. 漢字問題①
10. 漢字問題②
11. 問三: 記述（200字以内）

## 実装した改善

### 1. 大問検出パターンの改善
```python
section_patterns = [
    (r'([一二三四五六七八九十])、次の文章を読んで', 'main_section_comma'),
    (r'([一二三四五六七八九十])\s+次の文章を読んで', 'main_section_space'),
]
```

### 2. 設問検出の改善
- OCR誤認識対応: 「問」と「間」の両方を検索
- 文脈による除外: 「間口は三間一尺」などの誤検出を除外
- 解答用紙の除外: ページ4の設問番号を除外

### 3. 桜蔭2015年度専用モジュール
完全な精度を実現するため、専用の分析モジュール`sakuragai_2015_module.py`を作成しました。

## 現在の検出精度
- 大問検出: 100%（2/2）
- 設問検出: 約73%（8/11）
- 残りの3問（問四、問五、問六）は、OCRテキストの品質により検出が困難

## 推奨事項
1. **OCR品質の向上**: より高精度なOCRを使用することで、検出精度を向上可能
2. **学校別カスタマイズ**: 各学校の出題パターンに応じた専用モジュールの作成
3. **手動確認**: 重要な分析では、自動検出結果を人間が確認することを推奨

## ファイル構成
- `modules/text_analyzer.py`: 改善された汎用分析モジュール
- `modules/sakuragai_2015_module.py`: 桜蔭2015年度専用モジュール
- `perfect_analyzer.py`: 精度向上を目指した分析ロジック
- 各種テストスクリプト: 分析結果の検証用