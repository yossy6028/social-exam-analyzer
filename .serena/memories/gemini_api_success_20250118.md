# Gemini API による社会科問題分析の成功事例（2025年1月18日）

## 達成内容
日本工業大学駒場中学校2023年度社会科PDFの完璧な分析に成功

## 成功の要因

### 1. Gemini APIの活用方法
- **モデル**: gemini-1.5-flash
- **アプローチ**: 一問一問を個別に詳細分析
- **プロンプトエンジニアリング**:
  - 明確なJSON出力形式の指定
  - 具体的なテーマ抽出の指示（20文字以内）
  - 分野判定の一意性確保

### 2. 実装のポイント
```python
# JSONフォーマットの中括弧エスケープ
prompt = """
出力形式（JSON）:
{{
  "questions": [
    {{
      "number": "大問1-問1",
      "text": "問題文全体",
      "type": "選択式/記述式/穴埋め等"
    }}
  ]
}}
"""
```

### 3. 分析精度の改善
- **問題数**: 80問（誤検出）→ 21問（正確）
- **テーマ**: 「地理/歴史/公民/時事問題」（曖昧）→「河川が流れ込む平野の促成栽培」（具体的）
- **分野分布**: 地理42.9%、歴史42.9%、公民9.5%（バランス良好）

## 成功例のテーマ抽出
- 河川が流れ込む平野の促成栽培
- 循環型社会における3Rの理解
- 銅鐸と弥生時代の高床式倉庫
- 鎌倉幕府の成立と北条政子の役割
- 米騒動の原因と新聞記事の発行背景

## ファイル構成
- `analyze_with_gemini_detailed.py`: メイン分析スクリプト
- `gemini_analysis_result.json`: 詳細な分析結果
- `gemini_analysis_summary.txt`: 人間が読みやすいレポート

## 今後の応用
このアプローチはGUIアプリケーション（main.py）への統合が可能で、
他の学校の入試問題分析にも適用できる汎用的な解決策として確立